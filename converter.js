// enable modern mode
//'use strict';

// basic variables
let apiKey = 'c9555a7ee515159104fdba587ac2b480';
let rates;

// functions
async function fetchRates(apiKey) {
    /*
    let apiUrl = 'http://api.exchangeratesapi.io/v1/latest?access_key=' + apiKey;

    let response = await fetch(apiUrl);
    
    if (response.ok) {
	let result = await response.json();
	if (result.success) {
	    rates = result.rates;
	    let timestamp = result.timestamp;
	} else {
	    // error code goes here
	}
    } else {
	// error code goes here
    }
    */

    let result = {"success":true,"timestamp":1622224324,"base":"EUR","date":"2021-05-28","rates":{"AED":4.48227,"AFN":95.729885,"ALL":123.369122,"AMD":635.342171,"ANG":2.189819,"AOA":783.678964,"ARS":115.405586,"AUD":1.58234,"AWG":2.196475,"AZN":2.079567,"BAM":1.959352,"BBD":2.463228,"BDT":103.386213,"BGN":1.955826,"BHD":0.459998,"BIF":2405.139751,"BMD":1.220264,"BND":1.614496,"BOB":8.423875,"BRL":6.366719,"BSD":1.219993,"BTC":3.3679602e-5,"BTN":88.424212,"BWP":12.99235,"BYN":3.088953,"BYR":23917.1685,"BZD":2.459121,"CAD":1.473694,"CDF":2442.967709,"CHF":1.097419,"CLF":0.032018,"CLP":883.716301,"CNY":7.771129,"COP":4528.972111,"CRC":754.015513,"CUC":1.220264,"CUP":32.336988,"CVE":111.129025,"CZK":25.463227,"DJF":216.865026,"DKK":7.436665,"DOP":69.628482,"DZD":162.680493,"EGP":19.111159,"ERN":18.306384,"ETB":52.495749,"EUR":1,"FJD":2.485069,"FKP":0.868236,"GBP":0.859761,"GEL":3.978293,"GGP":0.868236,"GHS":7.052769,"GIP":0.868236,"GMD":62.453604,"GNF":11989.09103,"GTQ":9.425545,"GYD":255.018453,"HKD":9.470649,"HNL":29.402229,"HRK":7.515976,"HTG":110.346468,"HUF":348.165562,"IDR":17444.218696,"ILS":3.964869,"IMP":0.868236,"INR":88.32659,"IQD":1782.195132,"IRR":51379.203039,"ISK":147.603226,"JEP":0.868236,"JMD":181.603986,"JOD":0.865246,"JPY":133.958719,"KES":131.361422,"KGS":102.045283,"KHR":4966.473545,"KMF":493.444115,"KPW":1098.237473,"KRW":1359.300143,"KWD":0.367238,"KYD":1.016619,"KZT":522.829905,"LAK":11525.390432,"LBP":1855.941029,"LKR":242.169624,"LRD":209.458474,"LSL":16.809135,"LTL":3.603121,"LVL":0.738125,"LYD":5.424066,"MAD":10.791707,"MDL":21.465489,"MGA":4577.209153,"MKD":61.620777,"MMK":2008.117156,"MNT":3478.86576,"MOP":9.753194,"MRO":435.633931,"MUR":49.360015,"MVR":18.852797,"MWK":960.959354,"MXN":24.300795,"MYR":5.043956,"MZN":74.203897,"NAD":16.809146,"NGN":502.14093,"NIO":43.136455,"NOK":10.19559,"NPR":141.478659,"NZD":1.68106,"OMR":0.469827,"PAB":1.219993,"PEN":4.600475,"PGK":4.307207,"PHP":58.258438,"PKR":188.63543,"PLN":4.482514,"PYG":8278.113937,"QAR":4.443007,"RON":4.919492,"RSD":117.791757,"RUB":89.369706,"RWF":1208.061062,"SAR":4.576289,"SBD":9.723371,"SCR":20.135309,"SDG":511.897319,"SEK":10.121881,"SGD":1.613713,"SHP":0.868236,"SLL":12507.703047,"SOS":713.853976,"SRD":17.271637,"STD":25303.125105,"SVC":10.675191,"SYP":1534.524638,"SZL":16.809156,"THB":38.10945,"TJS":13.913813,"TMT":4.270923,"TND":3.32583,"TOP":2.724123,"TRY":10.451595,"TTD":8.286797,"TWD":33.794347,"TZS":2829.103266,"UAH":33.544804,"UGX":4327.27926,"USD":1.220264,"UYU":53.513765,"UZS":12928.693864,"VEF":260929258065.11676,"VND":28122.197207,"VUV":132.28539,"WST":3.070122,"XAF":657.135657,"XAG":0.043774,"XAU":0.000642,"XCD":3.297823,"XDR":0.844415,"XOF":657.111073,"XPF":120.013089,"YER":305.065828,"ZAR":16.78901,"ZMK":10983.836894,"ZMW":27.44033,"ZWL":392.925283}}
    rates = result.rates;

    let typeOptions = "";
    for (let key in rates) {
	typeOptions += '<option value="' + key + '">' + key + '</option>'
    }

    document.getElementById("typeIn").innerHTML = typeOptions;
    document.getElementById("typeOut").innerHTML = typeOptions;
}

// convert function
function convert(amt, curIn, curOut) {
    return amt / rates[curIn] * rates[curOut];
}

// fetch the rates

fetchRates(apiKey);


